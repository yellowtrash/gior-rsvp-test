<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>GIOR - Review & Submit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    body { font-family: 'DM Sans', sans-serif; }
    .mobile-view-container{
      background-image:
        linear-gradient(to top, rgba(0,0,0,.8) 0%, rgba(0,0,0,.2) 60%),
        url('../imgs/img_gior_formresvp.jpg');
      background-size: cover; background-position: center;
    }
    .h-visual { height: 100dvh; }
    @supports not (height: 100dvh) { :root{--vh:1vh;} .h-visual{height:calc(var(--vh)*100);} }
    .safe-bottom { padding-bottom: max(16px, env(safe-area-inset-bottom)); }
    .safe-top { padding-top: max(12px, env(safe-area-inset-top)); }
  </style>
  <script>(function(){function setVh(){document.documentElement.style.setProperty('--vh',(window.innerHeight*0.01)+'px');}
    setVh();window.addEventListener('resize',setVh);window.addEventListener('orientationchange',setVh);}())</script>
</head>
<div class="md:max-w-[420px] md:mx-auto md:w-full md:h-full md:flex md:flex-col">

<body class="mobile-view-container h-visual flex flex-col text-white antialiased">
  <header class="safe-top px-6 flex justify-between items-center mb-6">
    <button type="button" onclick="history.back()" class="p-2 rounded-full hover:bg-white/10 transition-colors" aria-label="Go back">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
    </button>
    <img src="../imgs/logo_gior.png" alt="GIOR Logo" class="h-8 w-auto opacity-90">
  </header>

  <main class="flex-1 px-6 overflow-y-auto">
    <h1 class="text-2xl font-bold mb-2">Please review your details</h1>
    <p class="text-white/80 mb-6">Make sure everything looks correct before submitting.</p>

    <section class="bg-white/10 backdrop-blur-md ring-1 ring-white/15 rounded-2xl shadow-xl p-5">
      <dl class="space-y-4">
        <div><dt class="text-xs uppercase tracking-wide text-white/70">Full Name</dt><dd id="vFullName" class="text-base font-medium text-white break-words mt-1">—</dd></div>
        <div><dt class="text-xs uppercase tracking-wide text-white/70">Phone Number</dt><dd id="vPhone" class="text-base font-medium text-white break-words mt-1">—</dd></div>
        <div><dt class="text-xs uppercase tracking-wide text-white/70">Attendance Date</dt><dd id="vDate" class="text-base font-medium text-white break-words mt-1">—</dd></div>
        <div><dt class="text-xs uppercase tracking-wide text-white/70">Number of Guests</dt><dd id="vGuests" class="text-base font-medium text-white break-words mt-1">—</dd></div>
        <div><dt class="text-xs uppercase tracking-wide text-white/70">Allergies / Dietary Restriction</dt><dd id="vAllergies" class="text-base font-medium text-white whitespace-pre-wrap break-words mt-1">—</dd></div>
      </dl>
    </section>

    <p class="text-white/70 text-sm mt-4">If everything looks correct, kindly click submit to confirm your attendance.</p>
  </main>

  <div class="mt-auto px-6 safe-bottom space-y-3">
    <a href="form-gior-step-1.html" class="text-white/80 hover:text-white text-sm underline underline-offset-2">Edit details</a>
    <button id="submitBtn" type="button"
      class="w-full flex items-center justify-center bg-[#B08018] text-white text-base py-4 px-6 rounded-lg font-semibold hover:bg-[#9a6f15] transition-colors duration-300">
      SUBMIT
    </button>
  </div>

  <script>
    const qs=(k)=>new URL(location.href).searchParams.get(k);
    const get=(k)=>sessionStorage.getItem(k)??qs(k)??'';
    const mapDate=(v)=>({'22-sept':'22 Sept','23-sept':'23 Sept','24-sept':'24 Sept','25-sept':'25 Sept','unable':'Unable to Join'}[v]||v||'—');
    const pax=(v)=>v?`${v} pax`:'—';
    const data={fullName:get('fullName')||get('name'),phone:get('phone'),attendanceDate:get('attendanceDate')||get('date'),guestCount:get('guestCount'),allergies:get('allergies')||''};
    document.getElementById('vFullName').textContent=data.fullName||'—';
    document.getElementById('vPhone').textContent=data.phone||'—';
    document.getElementById('vDate').textContent=mapDate(data.attendanceDate);
    document.getElementById('vGuests').textContent=pax(data.guestCount);
    document.getElementById('vAllergies').textContent=(data.allergies.trim()||'—');

    document.getElementById('submitBtn').addEventListener('click',()=>{
      if(!(data.fullName&&data.phone&&data.attendanceDate)){ alert('Some details are incomplete. Please tap “Edit details”.'); return; }
      sessionStorage.setItem('confirmed','true');
      window.location.href='form-gior-thankyou.html';
    });
  </script>
</div>
</body>
</html>
