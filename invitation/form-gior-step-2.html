<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>GIOR - Reservation Details (Step 2)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    body { font-family: 'DM Sans', sans-serif; }
    .mobile-view-container{
      background-image:
        linear-gradient(to top, rgba(0,0,0,.8) 0%, rgba(0,0,0,.2) 60%),
        url('../imgs/img_gior_formresvp.jpg');
      background-size: cover; background-position: center;
    }
    .h-visual { height: 100dvh; }
    @supports not (height: 100dvh) { :root{--vh:1vh;} .h-visual{height:calc(var(--vh)*100);} }
    .safe-bottom { padding-bottom: max(16px, env(safe-area-inset-bottom)); }
    .safe-top { padding-top: max(12px, env(safe-area-inset-top)); }
    .form-element{ background:#fff;color:#333;border-radius:8px;padding:12px 16px;border:1px solid transparent;width:100%;font-size:16px;transition:border-color .2s;resize:vertical; }
    .form-element:focus{ outline:none;border-color:#B08018; box-shadow:0 0 0 2px rgba(176,128,24,.3); }
    .form-element::placeholder{ color:#9CA3AF; }
    .helper{ font-size:12px; color:rgba(255,255,255,.75); }
  </style>
  <script>(function(){function setVh(){document.documentElement.style.setProperty('--vh',(window.innerHeight*0.01)+'px');}
    setVh();window.addEventListener('resize',setVh);window.addEventListener('orientationchange',setVh);}())</script>
</head>
<div class="md:max-w-[420px] md:mx-auto md:w-full md:h-full md:flex md:flex-col">

<body class="mobile-view-container h-visual flex flex-col text-white antialiased">
  <header class="safe-top px-6 flex justify-between items-center mb-6">
    <button type="button" onclick="history.back()" class="p-2 rounded-full hover:bg-white/10 transition-colors" aria-label="Go back">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
    </button>
    <img src="../imgs/logo_gior.png" alt="GIOR Logo" class="h-8 w-auto opacity-90">
  </header>

  <main class="flex-1 px-6 overflow-y-auto">
    <h1 class="text-2xl font-bold mb-6">A few final details</h1>

    <form id="reservationForm" class="space-y-6" novalidate>
      <div>
        <label for="allergies" class="block text-sm font-medium mb-2">Do you have any food allergies or dietary restrictions?</label>
        <textarea id="allergies" rows="4" maxlength="600" class="form-element"
          placeholder="e.g., nut allergy, lactose-free, gluten-free, vegetarian, halal, none"></textarea>
        <div class="flex justify-between mt-1">
          <span class="helper">Optional</span>
          <span class="helper"><span id="allergiesCount">0</span>/600</span>
        </div>
      </div>

      <div>
        <label for="note" class="block text-sm font-medium mb-2">Any message or note for us?</label>
        <textarea id="note" rows="4" maxlength="600" class="form-element"
          placeholder="Anything we should know to make your experience better"></textarea>
        <div class="flex justify-between mt-1">
          <span class="helper">Optional</span>
          <span class="helper"><span id="noteCount">0</span>/600</span>
        </div>
      </div>
    </form>
  </main>

  <div class="mt-auto px-6 safe-bottom">
    <a href="form-gior-review.html" id="nextBtn"
       class="w-full flex items-center justify-center bg-[#B08018] text-white text-base py-4 px-6 rounded-lg font-semibold hover:bg-[#9a6f15] transition-colors duration-300 text-center">
      NEXT
    </a>
  </div>

  <script>
    const K_ALLERGIES='allergies', K_NOTE='note';
    const allergies=document.getElementById('allergies'), note=document.getElementById('note');
    const allergiesCount=document.getElementById('allergiesCount'), noteCount=document.getElementById('noteCount');
    const get=(k)=>sessionStorage.getItem(k)??''; const set=(k,v)=>sessionStorage.setItem(k,v);
    function prefill(){ const a=get(K_ALLERGIES), n=get(K_NOTE); if(a){allergies.value=a;allergiesCount.textContent=a.length;} if(n){note.value=n;noteCount.textContent=n.length;} }
    document.addEventListener('DOMContentLoaded',prefill);
    function handle(el,k,c){const v=el.value.slice(0,600); el.value=v; set(k,v.trim()); c.textContent=v.length;}
    allergies.addEventListener('input',()=>handle(allergies,K_ALLERGIES,allergiesCount));
    note.addEventListener('input',()=>handle(note,K_NOTE,noteCount));
    document.getElementById('nextBtn').addEventListener('click',()=>{ set(K_ALLERGIES,allergies.value.trim()); set(K_NOTE,note.value.trim()); });
  </script>
</div>
</body>
</html>
